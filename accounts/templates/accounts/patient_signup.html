{% extends 'accounts/base.html' %}

{% block title %}Patient Signup - Clinic Appointment{% endblock %}

{% block content %}
<div class="auth-wrapper">
    <div class="auth-card" style="max-width: 500px;">
        <div class="text-center mb-3">
            <h1 style="color: var(--primary-color);">Create Account</h1>
            <p style="color: var(--text-muted);">Register as a new patient</p>
        </div>

        <form method="post" class="custom-form">
            {% csrf_token %}
            <style>
                .custom-form input,
                .custom-form select,
                .custom-form textarea {
                    width: 100%;
                    padding: 0.75rem 1rem;
                    border: 1px solid #cbd5e1;
                    border-radius: 8px;
                    font-size: 1rem;
                    transition: border-color 0.2s;
                    font-family: var(--font-body);
                    margin-bottom: 0.5rem;
                }

                .custom-form input:focus {
                    outline: none;
                    border-color: var(--primary-color);
                    box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
                }

                .custom-form label {
                    display: block;
                    margin-bottom: 0.5rem;
                    font-weight: 500;
                    color: var(--text-muted);
                    margin-top: 1rem;
                }

                .custom-form ul.errorlist {
                    color: var(--danger-color);
                    list-style: none;
                    padding: 0;
                    margin: 0 0 10px 0;
                    font-size: 0.9em;
                }

                .custom-form .helptext {
                    font-size: 0.85em;
                    color: #94a3b8;
                    display: block;
                    margin-bottom: 5px;
                }
            </style>

            {{ form.as_p }}

            <button type="submit" class="btn btn-primary btn-block mt-3">Register</button>
        </form>

        <div class="text-center mt-3">
            <p class="text-muted" style="font-size: 0.9rem;">
                Already have an account?
                <a href="{% url 'login' %}" style="font-weight: 600;">Back to Login</a>
            </p>
        </div>
    </div>
</div>

{% if signup_success %}
<script>
    // Using a more subtle notification or standard alert
    setTimeout(function () {
        alert("ðŸŽ‰ Registration successful! Redirecting to login...");
        window.location.href = "{% url 'login' %}";
    }, 500);
</script>
{% endif %}
{% endblock %}